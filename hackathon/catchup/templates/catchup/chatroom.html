{% extends "catchup/chat_page_dark.html" %}

{% block body %}
<div class="chat-section">
      <div class="chat-header">
        <div class="chat-header-left">
          <div class="friend-avatar"></div>
          <div>
            <div class="chat-user-name">{{ friend.username }}</div>
            <div class="chat-user-last-seen">Last seen 2 hours ago</div>
          </div>
        </div>
        <button class="chat-options-button" aria-label="Chat options">
          <svg viewBox="0 0 24 24">
            <circle cx="5" cy="12" r="2"/>
            <circle cx="12" cy="12" r="2"/>
            <circle cx="19" cy="12" r="2"/>
          </svg>
        </button>
      </div>

      <div id="chat-box" class="chat-box">
        {% for message in messages %}
      <div class="message {% if message.sender == user %}sent{% else %}received{% endif %}">
      <p><strong>{{ message.sender.username }}:</strong> {{ message.content }}</p>
      <small>{{ message.timestamp }}</small>
      </div>
      {% endfor %}
      </div>

      <div class="chat-input-section">
        <input
          type="text"
          class="chat-input"
          placeholder="Type your message..."
          aria-label="Message input"
        />

        <div class="buttons-container">
          <!-- Attach File -->
          <button class="attach-button" title="Attach file" aria-label="Attach file">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M16.5 6.5v9a3.5 3.5 0 0 1-7 0v-9a2.5 2.5 0 0 1 5 0v8a1.5 1.5 0 0 1-3 0v-7" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>

          <!-- Attach Voice -->
          <button class="attach-button" title="Attach voice" aria-label="Attach voice">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 14a3 3 0 0 0 3-3V7a3 3 0 0 0-6 0v4a3 3 0 0 0 3 3z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19 10v1a7 7 0 0 1-14 0v-1" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="12" y1="19" x2="12" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
              <line x1="8" y1="23" x2="16" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </button>

          <!-- Attach Image -->
          <button class="attach-button" title="Attach image" aria-label="Attach image">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <rect x="3" y="5" width="18" height="14" rx="2" ry="2" stroke="white" stroke-width="1.5" fill="none"/>
              <circle cx="8.5" cy="10.5" r="1.5" stroke="white" stroke-width="1.5" fill="none"/>
              <path d="M21 19l-5-5L5 21" stroke="white" stroke-width="1.5" fill="none" stroke-linejoin="round" stroke-linecap="round"/>
            </svg>
          </button>

          <!-- Camera (video upload) -->
          <button class="attach-button" title="Record or upload video" aria-label="Record or upload video" id="cameraButton">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 7l4-4v14l-4-4v4H5V5h12v2z" stroke="white" stroke-width="1.5" fill="none" stroke-linejoin="round" stroke-linecap="round"/>
              <circle cx="12" cy="12" r="3" stroke="white" stroke-width="1.5" fill="none"/>
            </svg>
          </button>

          <input
            type="file"
            accept="video/*"
            capture="environment"
            id="cameraInput"
          />
          
          <button class="send-button" aria-label="Send message">
            <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M2 21l21-9L2 3v7l15 2-15 2v7z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
{% endblock %}